import sys
sys.path.append('.')
from scr.lib.lab09.group import Group
from scr.lib.lab08.models import Student

print("=" * 50)
print("1. –ò–º–ø–æ—Ä—Ç –∏ —Å–æ–∑–¥–∞–Ω–∏–µ Group")
print("=" * 50)

group = Group("data/lab09/students.csv")
print(f"‚úÖ –°–æ–∑–¥–∞–Ω–∞ –≥—Ä—É–ø–ø–∞ —Å —Ñ–∞–π–ª–æ–º: data/lab09/students.csv")
print(f"‚úÖ –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞: {type(group)}")






print("\n" + "=" * 50)
print("2. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (list())")
print("=" * 50)

students = group.list()
print(f"‚úÖ –ù–∞–π–¥–µ–Ω–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: {len(students)}")

for i, s in enumerate(students, 1):
    print(f"{i}. {s}")






print("\n" + "=" * 50)
print("3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞ (add())")
print("=" * 50)

new_student = Student("–ù–æ–≤–µ–Ω—å–∫–∏–π –°—Ç—É–¥–µ–Ω—Ç", "2002-06-15", "–ë–ò–í–¢-22-1", 4.3)
print(f"‚úÖ –ù–æ–≤—ã–π —Å—Ç—É–¥–µ–Ω—Ç: {new_student}")

group.add(new_student)
print("‚úÖ –°—Ç—É–¥–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ CSV —Ñ–∞–π–ª")






print("\n" + "=" * 50)
print("4. –ü–æ–∏—Å–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (find())")
print("=" * 50)

search_term = "–ò–≤–∞–Ω–æ–≤"
print(f"üîç –ü–æ–∏—Å–∫: '{search_term}'")

found = group.find(search_term)
print(f"‚úÖ –ù–∞–π–¥–µ–Ω–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: {len(found)}")

for s in found:
    print(f"   - {s}")






print("\n" + "=" * 50)
print("5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (update())")
print("=" * 50)

student_name = "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á"
print(f"‚úèÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞: {student_name}")
print(f"   –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ: {group.find(student_name)[0]}")

group.update(student_name, gpa=4.8, group="–ë–ò–í–¢-21-2")
print("‚úÖ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã")

print(f"   –ù–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ: {group.find(student_name)[0]}")






print("\n" + "=" * 50)
print("6. –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ (remove())")
print("=" * 50)

student_to_remove = "–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á"
print(f"üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞: {student_to_remove}")

before = len(group.list())
group.remove(student_to_remove)
after = len(group.list())

print(f"‚úÖ –°—Ç—É–¥–µ–Ω—Ç —É–¥–∞–ª–µ–Ω")
print(f"   –ë—ã–ª–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: {before}")
print(f"   –°—Ç–∞–ª–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: {after}")






print("\n" + "=" * 50)
print("7. –ò—Ç–æ–≥–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤")
print("=" * 50)

students = group.list()
print(f"üìä –í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: {len(students)}")

for i, s in enumerate(students, 1):
    print(f"{i}. {s}")






print("\n" + "=" * 50)
print("8. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—Ä—É–ø–ø—ã (stats())")
print("=" * 50)

try:
    stats = group.stats()
    print("üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—Ä—É–ø–ø—ã:")
    print(f"   ‚Ä¢ –í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: {stats['count']}")
    print(f"   ‚Ä¢ –°—Ä–µ–¥–Ω–∏–π GPA: {stats['avg_gpa']:.2f}")
    print(f"   ‚Ä¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π GPA: {stats['min_gpa']}")
    print(f"   ‚Ä¢ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π GPA: {stats['max_gpa']}")
    print(f"   ‚Ä¢ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –≥—Ä—É–ø–ø–∞–º:")
    for group_name, count in stats['groups'].items():
        print(f"     - {group_name}: {count} —Å—Ç—É–¥–µ–Ω—Ç–æ–≤")
except AttributeError:
    print("‚ö†Ô∏è –ú–µ—Ç–æ–¥ stats() –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω")